The latest version of Julia in the `release` channel is 1.11.7+0.aarch64.apple.darwin14. You currently have `1.11.2+0.aarch64.apple.darwin14` installed. Run:

  juliaup update

in your terminal shell to install Julia 1.11.7+0.aarch64.apple.darwin14 and update the `release` channel to that version.
     Testing FormulaCompiler
┌ Warning: Entry in manifest at "/Users/emf/.julia/dev/FormulaCompiler/test" for package "Adapt" differs from that in "/Users/emf/.julia/dev/FormulaCompiler/Manifest.toml"
└ @ Pkg.Operations ~/.julia/juliaup/julia-1.11.2+0.aarch64.apple.darwin14/share/julia/stdlib/v1.11/Pkg/src/Operations.jl:1871
┌ Warning: Entry in manifest at "/Users/emf/.julia/dev/FormulaCompiler/test" for package "PrettyTables" differs from that in "/Users/emf/.julia/dev/FormulaCompiler/Manifest.toml"
└ @ Pkg.Operations ~/.julia/juliaup/julia-1.11.2+0.aarch64.apple.darwin14/share/julia/stdlib/v1.11/Pkg/src/Operations.jl:1871
┌ Warning: Entry in manifest at "/Users/emf/.julia/dev/FormulaCompiler/test" for package "TimeZones" differs from that in "/Users/emf/.julia/dev/FormulaCompiler/Manifest.toml"
└ @ Pkg.Operations ~/.julia/juliaup/julia-1.11.2+0.aarch64.apple.darwin14/share/julia/stdlib/v1.11/Pkg/src/Operations.jl:1871
┌ Warning: Entry in manifest at "/Users/emf/.julia/dev/FormulaCompiler/test" for package "BSplineKit" differs from that in "/Users/emf/.julia/dev/FormulaCompiler/Manifest.toml"
└ @ Pkg.Operations ~/.julia/juliaup/julia-1.11.2+0.aarch64.apple.darwin14/share/julia/stdlib/v1.11/Pkg/src/Operations.jl:1871
┌ Warning: Entry in manifest at "/Users/emf/.julia/dev/FormulaCompiler/test" for package "DataFrames" differs from that in "/Users/emf/.julia/dev/FormulaCompiler/Manifest.toml"
└ @ Pkg.Operations ~/.julia/juliaup/julia-1.11.2+0.aarch64.apple.darwin14/share/julia/stdlib/v1.11/Pkg/src/Operations.jl:1871
┌ Warning: Entry in manifest at "/Users/emf/.julia/dev/FormulaCompiler/test" for package "ForwardDiff" differs from that in "/Users/emf/.julia/dev/FormulaCompiler/Manifest.toml"
└ @ Pkg.Operations ~/.julia/juliaup/julia-1.11.2+0.aarch64.apple.darwin14/share/julia/stdlib/v1.11/Pkg/src/Operations.jl:1871
┌ Warning: Entry in manifest at "/Users/emf/.julia/dev/FormulaCompiler/test" for package "FillArrays" differs from that in "/Users/emf/.julia/dev/FormulaCompiler/Manifest.toml"
└ @ Pkg.Operations ~/.julia/juliaup/julia-1.11.2+0.aarch64.apple.darwin14/share/julia/stdlib/v1.11/Pkg/src/Operations.jl:1871
┌ Warning: Entry in manifest at "/Users/emf/.julia/dev/FormulaCompiler/test" for package "StatsModels" differs from that in "/Users/emf/.julia/dev/FormulaCompiler/Manifest.toml"
└ @ Pkg.Operations ~/.julia/juliaup/julia-1.11.2+0.aarch64.apple.darwin14/share/julia/stdlib/v1.11/Pkg/src/Operations.jl:1871
┌ Warning: Entry in manifest at "/Users/emf/.julia/dev/FormulaCompiler/test" for package "DataStructures" differs from that in "/Users/emf/.julia/dev/FormulaCompiler/Manifest.toml"
└ @ Pkg.Operations ~/.julia/juliaup/julia-1.11.2+0.aarch64.apple.darwin14/share/julia/stdlib/v1.11/Pkg/src/Operations.jl:1871
┌ Warning: Entry in manifest at "/Users/emf/.julia/dev/FormulaCompiler/test" for package "Distributions" differs from that in "/Users/emf/.julia/dev/FormulaCompiler/Manifest.toml"
└ @ Pkg.Operations ~/.julia/juliaup/julia-1.11.2+0.aarch64.apple.darwin14/share/julia/stdlib/v1.11/Pkg/src/Operations.jl:1871
┌ Warning: Entry in manifest at "/Users/emf/.julia/dev/FormulaCompiler/test" for package "Static" differs from that in "/Users/emf/.julia/dev/FormulaCompiler/Manifest.toml"
└ @ Pkg.Operations ~/.julia/juliaup/julia-1.11.2+0.aarch64.apple.darwin14/share/julia/stdlib/v1.11/Pkg/src/Operations.jl:1871
┌ Warning: Entry in manifest at "/Users/emf/.julia/dev/FormulaCompiler/test" for package "Compat" differs from that in "/Users/emf/.julia/dev/FormulaCompiler/Manifest.toml"
└ @ Pkg.Operations ~/.julia/juliaup/julia-1.11.2+0.aarch64.apple.darwin14/share/julia/stdlib/v1.11/Pkg/src/Operations.jl:1871
      Status `/private/var/folders/td/5b_qj7x16jlfbrt5dgq_y34m0000gp/T/jl_jSczYV/Project.toml`
  [6e4b80f9] BenchmarkTools v1.6.0
  [336ed68f] CSV v0.10.15
⌅ [324d7699] CategoricalArrays v0.10.8
⌃ [a93c6f00] DataFrames v1.7.1
⌃ [31c24e10] Distributions v0.25.120
  [72341345] FormulaCompiler v1.0.0 `~/.julia/dev/FormulaCompiler`
  [38e38edf] GLM v1.9.0
⌅ [ff71e718] MixedModels v4.38.1
  [ce6b1742] RDatasets v0.7.7
  [5064a6a7] StandardizedPredictors v1.0.1
  [10745b16] Statistics v1.11.1
⌃ [3eaba693] StatsModels v0.7.6
  [bd369af6] Tables v1.12.1
  [37e2e46d] LinearAlgebra v1.11.0
  [9a3f8284] Random v1.11.0
  [8dfed614] Test v1.11.0
      Status `/private/var/folders/td/5b_qj7x16jlfbrt5dgq_y34m0000gp/T/jl_jSczYV/Manifest.toml`
⌃ [79e6a3ab] Adapt v4.3.0
  [66dad0bd] AliasTables v1.1.3
⌃ [4c555306] ArrayLayouts v1.11.2
  [69666777] Arrow v2.8.0
  [31f734f8] ArrowTypes v2.3.0
⌃ [093aae92] BSplineKit v0.19.0
⌃ [aae01518] BandedMatrices v1.9.4
  [6e4b80f9] BenchmarkTools v1.6.0
  [c3b6d118] BitIntegers v0.3.5
  [fa961155] CEnum v0.5.0
  [336ed68f] CSV v0.10.15
⌅ [324d7699] CategoricalArrays v0.10.8
  [5ba52731] CodecLz4 v0.4.6
  [944b1d66] CodecZlib v0.7.8
  [6b39b394] CodecZstd v0.8.6
  [bbf7d656] CommonSubexpressions v0.3.1
  [f70d9fcc] CommonWorldInvalidations v1.0.0
⌃ [34da2185] Compat v4.18.0
  [f0e56b4a] ConcurrentUtilities v2.5.0
  [a8cc5b0e] Crayons v4.1.1
  [9a962f9c] DataAPI v1.16.0
⌃ [a93c6f00] DataFrames v1.7.1
⌅ [864edb3b] DataStructures v0.18.22
  [e2d170a0] DataValueInterfaces v1.0.0
  [85a47980] Dictionaries v0.4.5
  [163ba53b] DiffResults v1.1.0
  [b552c78f] DiffRules v1.15.1
⌃ [31c24e10] Distributions v0.25.120
  [ffbed154] DocStringExtensions v0.9.5
  [4e289a0a] EnumX v1.0.5
  [e2ba6199] ExprTools v0.1.10
  [442a2c76] FastGaussQuadrature v1.0.2
  [5789e2e9] FileIO v1.17.0
  [48062228] FilePathsBase v0.9.24
⌃ [1a297f60] FillArrays v1.13.0
  [72341345] FormulaCompiler v1.0.0 `~/.julia/dev/FormulaCompiler`
⌃ [f6369f11] ForwardDiff v1.1.0
  [38e38edf] GLM v1.9.0
  [34004b35] HypergeometricFunctions v0.3.28
  [615f187c] IfElse v0.1.1
  [313cdc1a] Indexing v1.1.1
  [842dd82b] InlineStrings v1.4.5
  [41ab1584] InvertedIndices v1.3.1
  [92d709cd] IrrationalConstants v0.2.4
  [82899510] IteratorInterfaceExtensions v1.0.0
  [692b3bcd] JLLWrappers v1.7.1
⌅ [682c06a0] JSON v0.21.4
  [0f8b85d8] JSON3 v1.14.3
  [b964fa9f] LaTeXStrings v1.4.0
  [2ab3a3ac] LogExpFunctions v0.3.29
  [1914dd2f] MacroTools v0.5.16
  [e1d29d7a] Missings v1.2.0
⌅ [ff71e718] MixedModels v4.38.1
  [7e9fb7ac] MixedModelsDatasets v0.1.2
  [78c3b35d] Mocking v0.8.1
  [76087f3c] NLopt v1.2.1
  [77ba4419] NaNMath v1.1.3
  [bac558e1] OrderedCollections v1.8.1
  [90014a1f] PDMats v0.11.35
  [69de0a69] Parsers v2.8.3
  [2dfb63ee] PooledArrays v1.4.3
⌅ [aea7be01] PrecompileTools v1.2.1
  [21216c6a] Preferences v1.5.0
⌅ [08abe8d2] PrettyTables v2.4.0
  [92933f4c] ProgressMeter v1.11.0
  [43287f4e] PtrArrays v1.3.0
  [1fd47b50] QuadGK v2.11.2
⌅ [df47a6cb] RData v0.8.3
  [ce6b1742] RDatasets v0.7.7
  [189a3867] Reexport v1.2.2
  [ae029012] Requires v1.3.1
  [79098fc4] Rmath v0.8.0
  [6c6a2e73] Scratch v1.3.0
  [91c51154] SentinelArrays v1.4.8
  [1277b4bf] ShiftedArrays v2.0.0
  [a2af1166] SortingAlgorithms v1.2.2
⌃ [276daf66] SpecialFunctions v2.5.1
  [03a91e81] SplitApplyCombine v1.2.3
  [5064a6a7] StandardizedPredictors v1.0.1
⌃ [aedffcd0] Static v1.2.0
  [90137ffa] StaticArrays v1.9.15
  [1e83bf80] StaticArraysCore v1.4.3
  [10745b16] Statistics v1.11.1
  [82ae8749] StatsAPI v1.7.1
  [2913bbd2] StatsBase v0.34.6
  [4c63d2b9] StatsFuns v1.5.0
⌃ [3eaba693] StatsModels v0.7.6
  [892a3eda] StringManipulation v0.4.1
  [354b36f9] StringViews v1.3.5
  [856f2bd8] StructTypes v1.11.0
  [dc5dba14] TZJData v1.5.0+2025b
  [3783bdb8] TableTraits v1.0.1
  [bd369af6] Tables v1.12.1
⌃ [f269a46b] TimeZones v1.22.0
  [3bb67fe8] TranscodingStreams v0.11.3
  [9d95f2ec] TypedTables v1.4.6
  [ea10d353] WeakRefStrings v1.4.2
  [76eceee3] WorkerUtilities v1.6.1
  [5ced341a] Lz4_jll v1.10.1+0
  [079eb43e] NLopt_jll v2.10.0+0
  [efe28fd5] OpenSpecFun_jll v0.5.6+0
  [f50d1b31] Rmath_jll v0.5.1+0
  [3161d3a3] Zstd_jll v1.5.7+1
  [0dad84c5] ArgTools v1.1.2
  [56f22d72] Artifacts v1.11.0
  [2a0f44e3] Base64 v1.11.0
  [ade2ca70] Dates v1.11.0
  [8ba89e20] Distributed v1.11.0
  [f43a241f] Downloads v1.6.0
  [7b1f6079] FileWatching v1.11.0
  [9fa8497b] Future v1.11.0
  [b77e0a4c] InteractiveUtils v1.11.0
  [4af54fe1] LazyArtifacts v1.11.0
  [b27032c2] LibCURL v0.6.4
  [76f85450] LibGit2 v1.11.0
  [8f399da3] Libdl v1.11.0
  [37e2e46d] LinearAlgebra v1.11.0
  [56ddb016] Logging v1.11.0
  [d6f4376e] Markdown v1.11.0
  [a63ad114] Mmap v1.11.0
  [ca575930] NetworkOptions v1.2.0
  [44cfe95a] Pkg v1.11.0
  [de0858da] Printf v1.11.0
  [9abbd945] Profile v1.11.0
  [3fa0cd96] REPL v1.11.0
  [9a3f8284] Random v1.11.0
  [ea8e919c] SHA v0.7.0
  [9e88b42a] Serialization v1.11.0
  [6462fe0b] Sockets v1.11.0
  [2f01184e] SparseArrays v1.11.0
  [f489334b] StyledStrings v1.11.0
  [4607b0f0] SuiteSparse
  [fa267f1f] TOML v1.0.3
  [a4e569a6] Tar v1.10.0
  [8dfed614] Test v1.11.0
  [cf7118a7] UUIDs v1.11.0
  [4ec0a83e] Unicode v1.11.0
  [e66e0078] CompilerSupportLibraries_jll v1.1.1+0
  [deac9b47] LibCURL_jll v8.6.0+0
  [e37daf67] LibGit2_jll v1.7.2+0
  [29816b5a] LibSSH2_jll v1.11.0+1
  [c8ffd9c3] MbedTLS_jll v2.28.6+0
  [14a3606d] MozillaCACerts_jll v2023.12.12
  [4536629a] OpenBLAS_jll v0.3.27+1
  [05823500] OpenLibm_jll v0.8.1+2
  [bea87d4a] SuiteSparse_jll v7.7.0+0
  [83775a58] Zlib_jll v1.2.13+1
  [8e850b90] libblastrampoline_jll v5.11.0+0
  [8e850ede] nghttp2_jll v1.59.0+0
  [3f19e933] p7zip_jll v17.4.0+2
        Info Packages marked with ⌃ and ⌅ have new versions available. Those with ⌃ may be upgradable, but those with ⌅ are restricted by compatibility constraints from upgrading.
     Testing Running tests...
[ Info: Creating 100K observation dataset...
[ Info: Dataset created: 100000 rows, 12 columns
[ Info: Fitting complex model...
[ Info: Testing compilation performance...
[ Info: Compilation time: 0.507s
[ Info: Testing ContrastEvaluator construction...
[ Info: ContrastEvaluator construction time: 0.116s
[ Info: Testing evaluation performance...
[ Info: Mean evaluation time: 288.5ns
[ Info: Max evaluation time: 296.6ns
[ Info: Testing allocation performance...
[ Info: Allocation results: min=0, max=0, mean=0.0
[ Info: ✓ Perfect zero allocations confirmed
[ Info: Testing memory usage scaling...
[ Info: ContrastEvaluator memory usage: 864 bytes
[ Info: Testing correctness on random samples...
[ Info: ✓ All correctness tests passed
[ Info: Creating dataset with 50+ categorical levels...
[ Info: High cardinality variable: 60 levels
[ Info: Testing high-cardinality ContrastEvaluator...
[ Info: Testing contrast between Level_12 and Level_15...
[ Info: High-cardinality contrast time: 821.8ns
[ Info: Testing performance scaling with categorical levels...
[ Info: Performance ratio (60 vs 5 levels): 0.85x
[ Info: Testing multiple variables performance...
[ Info: Model compiled with 38 terms
[ Info: Creating ContrastEvaluator with 12 variables...
[ Info: Testing performance across variable types...
[ Info: Variable cat1: 258.5ns
[ Info: Variable cat2: 258.1ns
[ Info: Variable cat3: 267.0ns
[ Info: Variable cat4: 260.8ns
[ Info: Variable cat5: 266.6ns
[ Info: Variable cat6: 276.4ns
[ Info: Testing batch performance...
[ Info: Mean batch time: 222.8ns
[ Info: ContrastEvaluator memory with 12 vars: 968 bytes
[ Info: Testing memory scaling properties...
[ Info: Memory usage by dataset size:
[ Info:   1000 rows: 192 bytes
[ Info:   10000 rows: 192 bytes
[ Info:   50000 rows: 192 bytes
[ Info: Memory scaling ratio (50K vs 1K): 1.0x
Continuous override benchmark:
  Memory: 0 bytes
  Allocations: 0
  Min time: 0.013484969939879759 μs
Boolean override benchmark:
  Memory: 0 bytes
  Allocations: 0
  Min time: 0.01418118118118118 μs
Categorical override benchmark:
  Memory: 0 bytes
  Allocations: 0
  Min time: 0.014764764764764765 μs
Mixed override benchmark:
  Memory: 0 bytes
  Allocations: 0
  Min time: 0.012595595595595595 μs
✓ All 6 test rows achieved zero allocation
Performance comparison:
  Normal - Memory: 0 bytes, Allocs: 0
  Override - Memory: 0 bytes, Allocs: 0
  Normal - Min time: 0.01468068068068068 μs
  Override - Min time: 0.01463963963963964 μs
✓ Override performance ratio: 1.0x
Complex model override benchmark:
  Memory: 0 bytes
  Allocations: 0
  Min time: 0.025225903614457833 μs
✓ All compressed categorical tests passed



VARIANT 1: Simplest possible - just continuous variables
────────────────────────────────────────────────────────────────────────────────

Simple continuous only
  Formula: response ~ dists_p_inv + are_related_dists_a_inv
  Testing derivatives for: [:dists_p_inv, :are_related_dists_a_inv]
  Result: 0 allocs, 0 bytes
  Expected: 0 allocs, 0 bytes
  ✓ PASS



VARIANT 2: Add boolean variable (not a predicate)
────────────────────────────────────────────────────────────────────────────────

With boolean variable
  Formula: response ~ socio4 + dists_p_inv + are_related_dists_a_inv
  Testing derivatives for: [:dists_p_inv, :are_related_dists_a_inv]
  Result: 0 allocs, 0 bytes
  Expected: 0 allocs, 0 bytes
  ✓ PASS



VARIANT 3: Boolean interaction with continuous
────────────────────────────────────────────────────────────────────────────────

Boolean * continuous interaction
  Formula: response ~ socio4 + dists_p_inv + socio4 & dists_p_inv
  Testing derivatives for: [:dists_p_inv]
  Result: 0 allocs, 0 bytes
  Expected: 0 allocs, 0 bytes
  ✓ PASS



VARIANT 4: Boolean predicate (comparison)
────────────────────────────────────────────────────────────────────────────────

Boolean predicate with <=
  Formula: response ~ dists_p_inv + :(dists_a_inv <= inv(2))
  Testing derivatives for: [:dists_p_inv]
  Result: 0 allocs, 0 bytes
  Expected: 0 allocs, 0 bytes
  ✓ PASS



VARIANT 5: Categorical variable
────────────────────────────────────────────────────────────────────────────────

With categorical variable
  Formula: response ~ dists_p_inv + relation
  Testing derivatives for: [:dists_p_inv]
  Result: 0 allocs, 0 bytes
  Expected: 0 allocs, 0 bytes
  ✓ PASS



VARIANT 6: Categorical interaction with continuous
────────────────────────────────────────────────────────────────────────────────

Categorical * continuous interaction
  Formula: response ~ dists_p_inv + dists_p_inv & relation
  Testing derivatives for: [:dists_p_inv]
  Result: 0 allocs, 0 bytes
  Expected: 0 allocs, 0 bytes
  ✓ PASS



VARIANT 7: Complex categorical interactions (like complex_example.jl)
────────────────────────────────────────────────────────────────────────────────

Complex categorical interactions
  Formula: response ~ socio4 + dists_p_inv + are_related_dists_a_inv + schoolyears_p + wealth_d1_4_p + relation + socio4 & dists_p_inv + socio4 & are_related_dists_a_inv + schoolyears_p & socio4 + wealth_d1_4_p & socio4 + relation & socio4
  Testing derivatives for: [:dists_p_inv, :are_related_dists_a_inv, :schoolyears_p, :wealth_d1_4_p]
  Result: 0 allocs, 0 bytes
  Expected: 0 allocs, 0 bytes
  ✓ PASS



VARIANT 8: Full complex formula WITHOUT boolean predicate
────────────────────────────────────────────────────────────────────────────────

Full complex (no boolean predicate)
  Formula: response ~ socio4 + dists_p_inv + are_related_dists_a_inv + schoolyears_p + wealth_d1_4_p + man_p + age_p + religion_c_p + same_building + population + hhi_religion + hhi_indigenous + coffee_cultivation + market + relation + degree_a_mean + degree_h + age_a_mean + age_h + age_h_nb_1_socio + schoolyears_a_mean + schoolyears_h + schoolyears_h_nb_1_socio + man_x + man_x_mixed_nb_1 + wealth_d1_4_a_mean + wealth_d1_4_h + wealth_d1_4_h_nb_1_socio + isindigenous_x + isindigenous_homop_nb_1 + religion_c_x + religion_homop_nb_1 + socio4 & dists_p_inv + socio4 & are_related_dists_a_inv + :(!socio4) & dists_a_inv + schoolyears_p & socio4 + schoolyears_p & are_related_dists_a_inv + wealth_d1_4_p & socio4 + wealth_d1_4_p & are_related_dists_a_inv + man_p & socio4 + man_p & are_related_dists_a_inv + age_p & socio4 + age_p & are_related_dists_a_inv + religion_c_p & socio4 + religion_c_p & are_related_dists_a_inv + same_building & socio4 + same_building & are_related_dists_a_inv + population & socio4 + population & are_related_dists_a_inv + hhi_religion & socio4 + hhi_religion & are_related_dists_a_inv + hhi_indigenous & socio4 + hhi_indigenous & are_related_dists_a_inv + coffee_cultivation & socio4 + coffee_cultivation & are_related_dists_a_inv + market & socio4 + market & are_related_dists_a_inv + relation & socio4 + relation & are_related_dists_a_inv + degree_a_mean & socio4 + degree_a_mean & are_related_dists_a_inv + degree_h & socio4 + degree_h & are_related_dists_a_inv + age_a_mean & socio4 + age_a_mean & are_related_dists_a_inv + age_h & socio4 + age_h & are_related_dists_a_inv + age_h_nb_1_socio & socio4 + age_h_nb_1_socio & are_related_dists_a_inv + age_h & age_h_nb_1_socio + schoolyears_a_mean & socio4 + schoolyears_a_mean & are_related_dists_a_inv + schoolyears_h & socio4 + schoolyears_h & are_related_dists_a_inv + schoolyears_h_nb_1_socio & socio4 + schoolyears_h_nb_1_socio & are_related_dists_a_inv + schoolyears_h & schoolyears_h_nb_1_socio + man_x & socio4 + man_x & are_related_dists_a_inv + man_x_mixed_nb_1 & socio4 + man_x_mixed_nb_1 & are_related_dists_a_inv + man_x & man_x_mixed_nb_1 + wealth_d1_4_a_mean & socio4 + wealth_d1_4_a_mean & are_related_dists_a_inv + wealth_d1_4_h & socio4 + wealth_d1_4_h & are_related_dists_a_inv + wealth_d1_4_h_nb_1_socio & socio4 + wealth_d1_4_h_nb_1_socio & are_related_dists_a_inv + wealth_d1_4_h & wealth_d1_4_h_nb_1_socio + isindigenous_x & socio4 + isindigenous_x & are_related_dists_a_inv + isindigenous_homop_nb_1 & socio4 + isindigenous_homop_nb_1 & are_related_dists_a_inv + isindigenous_x & isindigenous_homop_nb_1 + religion_c_x & socio4 + religion_c_x & are_related_dists_a_inv + religion_homop_nb_1 & socio4 + religion_homop_nb_1 & are_related_dists_a_inv + religion_c_x & religion_homop_nb_1 + religion_c_x & hhi_religion + isindigenous_x & hhi_indigenous + age_h & age_h_nb_1_socio & socio4 + age_h & age_h_nb_1_socio & are_related_dists_a_inv + schoolyears_h & schoolyears_h_nb_1_socio & socio4 + schoolyears_h & schoolyears_h_nb_1_socio & are_related_dists_a_inv + man_x & man_x_mixed_nb_1 & socio4 + man_x & man_x_mixed_nb_1 & are_related_dists_a_inv + wealth_d1_4_h & wealth_d1_4_h_nb_1_socio & socio4 + wealth_d1_4_h & wealth_d1_4_h_nb_1_socio & are_related_dists_a_inv + isindigenous_x & isindigenous_homop_nb_1 & socio4 + isindigenous_x & isindigenous_homop_nb_1 & are_related_dists_a_inv + religion_c_x & religion_homop_nb_1 & socio4 + religion_c_x & religion_homop_nb_1 & are_related_dists_a_inv
  Testing derivatives for: [:age_h, :dists_p_inv, :are_related_dists_a_inv, :schoolyears_h]
  Result: 0 allocs, 0 bytes
  Expected: 0 allocs, 0 bytes
  ✓ PASS



VARIANT 9: Full complex formula WITH boolean predicate
────────────────────────────────────────────────────────────────────────────────

Full complex (with boolean predicate)
  Formula: response ~ socio4 + dists_p_inv + are_related_dists_a_inv + schoolyears_p + wealth_d1_4_p + man_p + age_p + religion_c_p + same_building + population + hhi_religion + hhi_indigenous + coffee_cultivation + market + relation + degree_a_mean + degree_h + age_a_mean + age_h + age_h_nb_1_socio + schoolyears_a_mean + schoolyears_h + schoolyears_h_nb_1_socio + man_x + man_x_mixed_nb_1 + wealth_d1_4_a_mean + wealth_d1_4_h + wealth_d1_4_h_nb_1_socio + isindigenous_x + isindigenous_homop_nb_1 + religion_c_x + religion_homop_nb_1 + socio4 & dists_p_inv + socio4 & are_related_dists_a_inv + :(!socio4) & dists_a_inv + num_common_nbs & :(dists_a_inv <= inv(2)) + schoolyears_p & socio4 + schoolyears_p & are_related_dists_a_inv + wealth_d1_4_p & socio4 + wealth_d1_4_p & are_related_dists_a_inv + man_p & socio4 + man_p & are_related_dists_a_inv + age_p & socio4 + age_p & are_related_dists_a_inv + religion_c_p & socio4 + religion_c_p & are_related_dists_a_inv + same_building & socio4 + same_building & are_related_dists_a_inv + population & socio4 + population & are_related_dists_a_inv + hhi_religion & socio4 + hhi_religion & are_related_dists_a_inv + hhi_indigenous & socio4 + hhi_indigenous & are_related_dists_a_inv + coffee_cultivation & socio4 + coffee_cultivation & are_related_dists_a_inv + market & socio4 + market & are_related_dists_a_inv + relation & socio4 + relation & are_related_dists_a_inv + degree_a_mean & socio4 + degree_a_mean & are_related_dists_a_inv + degree_h & socio4 + degree_h & are_related_dists_a_inv + age_a_mean & socio4 + age_a_mean & are_related_dists_a_inv + age_h & socio4 + age_h & are_related_dists_a_inv + age_h_nb_1_socio & socio4 + age_h_nb_1_socio & are_related_dists_a_inv + age_h & age_h_nb_1_socio + schoolyears_a_mean & socio4 + schoolyears_a_mean & are_related_dists_a_inv + schoolyears_h & socio4 + schoolyears_h & are_related_dists_a_inv + schoolyears_h_nb_1_socio & socio4 + schoolyears_h_nb_1_socio & are_related_dists_a_inv + schoolyears_h & schoolyears_h_nb_1_socio + man_x & socio4 + man_x & are_related_dists_a_inv + man_x_mixed_nb_1 & socio4 + man_x_mixed_nb_1 & are_related_dists_a_inv + man_x & man_x_mixed_nb_1 + wealth_d1_4_a_mean & socio4 + wealth_d1_4_a_mean & are_related_dists_a_inv + wealth_d1_4_h & socio4 + wealth_d1_4_h & are_related_dists_a_inv + wealth_d1_4_h_nb_1_socio & socio4 + wealth_d1_4_h_nb_1_socio & are_related_dists_a_inv + wealth_d1_4_h & wealth_d1_4_h_nb_1_socio + isindigenous_x & socio4 + isindigenous_x & are_related_dists_a_inv + isindigenous_homop_nb_1 & socio4 + isindigenous_homop_nb_1 & are_related_dists_a_inv + isindigenous_x & isindigenous_homop_nb_1 + religion_c_x & socio4 + religion_c_x & are_related_dists_a_inv + religion_homop_nb_1 & socio4 + religion_homop_nb_1 & are_related_dists_a_inv + religion_c_x & religion_homop_nb_1 + religion_c_x & hhi_religion + isindigenous_x & hhi_indigenous + num_common_nbs & :(dists_a_inv <= inv(2)) & are_related_dists_a_inv + num_common_nbs & :(dists_a_inv <= inv(2)) & dists_p_inv + age_h & age_h_nb_1_socio & socio4 + age_h & age_h_nb_1_socio & are_related_dists_a_inv + schoolyears_h & schoolyears_h_nb_1_socio & socio4 + schoolyears_h & schoolyears_h_nb_1_socio & are_related_dists_a_inv + man_x & man_x_mixed_nb_1 & socio4 + man_x & man_x_mixed_nb_1 & are_related_dists_a_inv + wealth_d1_4_h & wealth_d1_4_h_nb_1_socio & socio4 + wealth_d1_4_h & wealth_d1_4_h_nb_1_socio & are_related_dists_a_inv + isindigenous_x & isindigenous_homop_nb_1 & socio4 + isindigenous_x & isindigenous_homop_nb_1 & are_related_dists_a_inv + religion_c_x & religion_homop_nb_1 & socio4 + religion_c_x & religion_homop_nb_1 & are_related_dists_a_inv
  Testing derivatives for: [:age_h, :dists_p_inv, :are_related_dists_a_inv, :schoolyears_h]
  Result: 0 allocs, 0 bytes
  Expected: 0 allocs, 0 bytes
  ✓ PASS



================================================================================
SUMMARY
================================================================================
This test isolates what causes AD allocations:
  - Simple formulas should show 0 allocs
  - Boolean predicates (<=, >=, etc.) cause allocations
  - Other features should be investigated if they cause allocations

=== modelrow() Allocations ===
  Allocations: 0
  Memory: 0 bytes
  Median time: 583.0 ns

=== derivative_modelrow!() Allocations (AD backend) ===
  Variables: [:age_h, :dists_p_inv, :are_related_dists_a_inv, :schoolyears_h]
  Allocations: 0
  Memory: 0 bytes
  Median time: 2041.0 ns
  NOTE: Uses 53-column NamedTuple; cached columns keep allocations at zero

=== derivative_modelrow!() Allocations (FD backend) ===
  Variables: [:age_h, :dists_p_inv, :are_related_dists_a_inv, :schoolyears_h]
  Allocations: 0
  Memory: 0 bytes
  Median time: 4750.0 ns

=== Batch modelrow() n=100 ===
  Total allocations: 0
  Allocations/row: 0.0

=== Batch modelrow() n=1000 ===
  Total allocations: 0
  Allocations/row: 0.0

=== Batch modelrow() n=500000 ===
  Total allocations: 0
  Allocations/row: 0.0

=== Batch derivative_modelrow!() AD n=100 ===
  Total allocations: 0
  Allocations/row: 0.0 (target: 0)

=== Batch derivative_modelrow!() AD n=1000 ===
  Total allocations: 0
  Allocations/row: 0.0 (target: 0)

=== Batch derivative_modelrow!() AD n=500000 ===
  Total allocations: 0
  Allocations/row: 0.0 (target: 0)

=== Batch derivative_modelrow!() FD n=100 ===
  Total allocations: 0
  Allocations/row: 0.0

=== Batch derivative_modelrow!() FD n=1000 ===
  Total allocations: 0
  Allocations/row: 0.0

=== Batch derivative_modelrow!() FD n=500000 ===
  Total allocations: 0
  Allocations/row: 0.0

=== NamedTuple Size Impact on AD Allocations ===
  Allocations: 0
  Memory: 0 bytes
  Dataset columns: 53
✓ Negative Binomial models supported and working
Linear: Treatment=41.6ns, Binary=43.7ns
Logistic: Treatment=41.4ns, Binary=44.9ns
Poisson: Treatment=46.2ns, Binary=42.2ns
Large dataset (2000 rows): 65.7ns
GLM Integration Tests (Phase 6.2.1) completed successfully!
✓ Linear, Logistic, and Poisson models fully supported
✓ All link functions working correctly with gradient computation
✓ Zero allocations maintained across all GLM families
✓ Mathematical consistency validated across model types
✓ Fixed effects extraction and contrast computation validated
✓ Multiple random effects grouping handled correctly
✓ GLMM gradient computation and standard errors working
✓ Poisson GLMM successfully tested
Large mixed model (1000 obs): Treatment=58.9ns, Condition=63.7ns, Binary=63.9ns
MixedModels Integration Tests (Phase 6.2.2) completed successfully!
✓ Linear and Generalized Linear Mixed Models fully supported
✓ Fixed effects extraction and contrast computation validated
✓ Complex random effects structures handled correctly
✓ Zero allocations maintained across all mixed model types
✓ Performance scaling confirmed with large hierarchical datasets
✓ Gradient computation and standard errors working for GLMMs
Test Summary:            | Pass  Total      Time
FormulaCompiler.jl Tests | 1892   1892  13m13.9s
     Testing FormulaCompiler tests passed 
